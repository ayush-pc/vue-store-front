(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{1283:function(t,e,o){"use strict";var i=o(968);o.n(i).a},1284:function(t,e,o){(t.exports=o(695)(!1)).push([t.i,".qty-input[data-v-63525c95]{border-style:solid;border-width:0 0 1px 0;width:90px}.custom-option>label[data-v-63525c95]{font-weight:bold;margin-bottom:10px}.error[data-v-63525c95]{color:#eb5757;padding-top:5px;display:block}.relative label.qty[data-v-63525c95]{padding-left:5px}.relative label[data-v-63525c95]{padding-left:35px;margin-bottom:12px;cursor:pointer;font-size:16px;line-height:30px}.relative label[data-v-63525c95]:before{content:'';position:absolute;top:3px;left:0;width:22px;height:22px;background-color:#fff;border:1px solid #bdbdbd;cursor:pointer}input[type='text'][data-v-63525c95]{-webkit-transition:0.3s all;-o-transition:0.3s all;transition:0.3s all;background:inherit}input[type='text'][data-v-63525c95]::-webkit-input-placeholder{color:#bdbdbd}input[type='text'][data-v-63525c95]::-moz-placeholder{color:#bdbdbd}input[type='text'][data-v-63525c95]:hover,input[type='text'][data-v-63525c95]:focus{outline:none;border-color:#000}input[type='radio'][data-v-63525c95],input[type='checkbox'][data-v-63525c95]{position:absolute;top:3px;left:0;opacity:0}input[type='radio']:checked+label[data-v-63525c95]:before,input[type='checkbox']:checked+label[data-v-63525c95]:before{background-color:#bdbdbd;border-color:#bdbdbd;cursor:pointer}input[type='radio']:checked+label[data-v-63525c95]:after,input[type='checkbox']:checked+label[data-v-63525c95]:after{content:'';position:absolute;top:9px;left:5px;width:11px;height:5px;border:3px solid #fff;border-top:none;border-right:none;background-color:#bdbdbd;-webkit-transform:rotate(-45deg);-ms-transform:rotate(-45deg);transform:rotate(-45deg)}input[type='radio']:hover+label[data-v-63525c95]:before,input[type='radio']:focus+label[data-v-63525c95]:before,input[type='checkbox']:hover+label[data-v-63525c95]:before,input[type='checkbox']:focus+label[data-v-63525c95]:before{border-color:#828282}input[type='radio']:disabled+label[data-v-63525c95],input[type='checkbox']:disabled+label[data-v-63525c95]{cursor:not-allowed}input[type='radio']:disabled+label[data-v-63525c95]:hover:before,input[type='radio']:disabled+label[data-v-63525c95]:focus:before,input[type='checkbox']:disabled+label[data-v-63525c95]:hover:before,input[type='checkbox']:disabled+label[data-v-63525c95]:focus:before{border-color:#bdbdbd;cursor:not-allowed}.qty-label[data-v-63525c95]{font-size:12px !important;padding-left:0px !important}\n",""])},1390:function(t,e,o){"use strict";o.r(e);var i=o(158),n=o(11),r=o(2),a=o(4),d=o(1),s=function(){return(s=Object.assign||function(t){for(var e,o=1,i=arguments.length;o<i;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},l=function(t){var e="function"==typeof Symbol&&Symbol.iterator,o=e&&t[e],i=0;if(o)return o.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function u(t){return["bundleOption_"+t.option_id,"bundleOptionQty_"+t.option_id]}var p={name:"ProductBundleOptions",props:{product:{type:Object,required:!0}},data:function(){return{selectedOptions:{},validationRules:{},validationResults:{}}},computed:{errorMessages:function(){var t=this,e={};return Object.keys(this.validationResults).map((function(o){var i=t.validationResults[o];i.error&&(e[o]=i.message)})),e}},beforeMount:function(){this.setupValidationRules()},methods:s(s({},Object(i.d)("product",{setBundleOptionValue:n.l})),{setupValidationRules:function(){var t,e,o,i;r.a.dispatch("product/addCustomOptionValidator",{validationRule:"gtzero",validatorFunction:function(t){return{error:null===t||""===t||!1===t||t<=0,message:a.a.t("Must be greater than 0")}}});try{for(var n=l(this.product.bundle_options),d=n.next();!d.done;d=n.next()){var s=d.value;try{for(var p=(o=void 0,l(u(s))),c=p.next();!c.done;c=p.next()){var b=c.value;s.required&&(this.validationRules[b]="gtzero")}}catch(t){o={error:t}}finally{try{c&&!c.done&&(i=p.return)&&i.call(p)}finally{if(o)throw o.error}}}}catch(e){t={error:e}}finally{try{d&&!d.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},optionChanged:function(t){var e=t.fieldName,o=t.option,i=t.qty,n=t.value;if(e){this.setBundleOptionValue({optionId:o.option_id,optionQty:parseInt(i),optionSelections:[parseInt(n.id)]}),this.$store.dispatch("product/setBundleOptions",{product:this.product,bundleOptions:this.$store.state.product.current_bundle_options}),this.selectedOptions[e]={qty:i,value:n};var r=n?n.id:null;this.validateField(o,i,r)&&this.$bus.$emit("product-after-bundleoptions",{product:this.product,option:o,optionValues:this.selectedOptions})}},isValid:function(){var t=!0;return this.validationResults.map((function(e){e.error&&(t=!1)})),t},validateField:function(t,e,o){var i,n,r=!0,s={error:!1,message:""};try{for(var p=l(u(t)),c=p.next();!c.done;c=p.next()){var b=c.value,f=this.validationRules[b];if(this.product.errors.custom_options=null,f){var h=this.$store.state.product.custom_options_validators[f];if("function"==typeof h){var v=h(e);v.error&&(s=v);var y=h(o);y.error&&(s=y),this.$set(this.validationResults,b,s),s.error?(this.product.errors["bundle_options_"+b]=a.a.t("Please configure product bundle options and fix the validation errors"),r=!1):this.product.errors["bundle_options_"+b]=null}else d.a.error("No validation rule found for "+f,"components-product-bundle-options")(),this.$set(this.validationResults,b,s)}else this.$set(this.validationResults,b,s)}}catch(t){i={error:t}}finally{try{c&&!c.done&&(n=p.return)&&n.call(p)}finally{if(i)throw i.error}}return r}})},c=o(0),b={mixins:[{name:"ProductBundleOption",props:{option:{type:Object,required:!0},errorMessages:{type:Object,default:null}},data:function(){return{productOptionId:null,quantity:1}},computed:{productBundleOption:function(){return"bundleOption_"+this.option.option_id},bundleOptionName:function(){return"bundleOption_"+this._uid+"_"+this.option.option_id+"_"},quantityName:function(){return"bundleOptionQty_"+this.option.option_id},value:function(){var t=this,e=this.option.product_links;return Array.isArray(e)?e.find((function(e){return e.id===t.productOptionId})):e},errorMessage:function(){return this.errorMessages?this.errorMessages[this.quantityName]:""}},mounted:function(){this.setDefaultValues(),c.usePriceTiers&&this.$bus.$on("product-after-setup-associated",this.setDefaultValues)},beforeDestroy:function(){c.usePriceTiers&&this.$bus.$off("product-after-setup-associated",this.setDefaultValues)},watch:{productOptionId:function(t){this.bundleOptionChanged()},quantity:function(t){this.bundleOptionChanged()}},methods:{setDefaultValues:function(){var t=this.option.product_links;if(t){var e=Array.isArray(t)?t.find((function(t){return t.is_default})):t;this.productOptionId=e?e.id:t[0].id,this.quantity=e?e.qty:1}},bundleOptionChanged:function(){this.$emit("option-changed",{option:this.option,fieldName:this.productBundleOption,qty:this.quantity,value:this.value})}}}]},f=(o(1283),o(170)),h={mixins:[p],components:{ProductBundleOption:Object(f.a)(b,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"custom-option mb15"},[o("h4",[t._v(" "+t._s(t.option.title)+" ")]),t._v(" "),t._l(t.option.product_links,(function(e){return o("div",{key:e.id,staticClass:"m5 relative",attrs:{"data-testid":"bundle-single-option"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.productOptionId,expression:"productOptionId"}],staticClass:"m0 no-outline",attrs:{type:"radio",name:t.bundleOptionName+e.id,id:t.bundleOptionName+e.id,focus:""},domProps:{value:e.id,checked:t._q(t.productOptionId,e.id)},on:{change:function(o){t.productOptionId=e.id}}}),t._v(" "),e.product?o("label",{staticClass:"pl10 lh20 h4 pointer",attrs:{for:t.bundleOptionName+e.id},domProps:{innerHTML:t._s(e.product.name)}}):t._e()])})),t._v(" "),o("div",[o("label",{staticClass:"qty-label flex",attrs:{for:t.quantityName}},[t._v(t._s(t.$t("Quantity")))]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.quantity,expression:"quantity"}],staticClass:"m0 no-outline qty-input py10 brdr-cl-primary bg-cl-transparent h4",attrs:{type:"number",min:"0",name:t.quantityName,id:t.quantityName,focus:""},domProps:{value:t.quantity},on:{input:function(e){e.target.composing||(t.quantity=e.target.value)}}})]),t._v(" "),t.errorMessage?o("span",{staticClass:"error"},[t._v(t._s(t.errorMessage))]):t._e()],2)}),[],!1,null,"63525c95",null).exports}},v=Object(f.a)(h,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("form",{staticClass:"custom-options",attrs:{"data-testid":"bundle-options"}},t._l(t.product.bundle_options,(function(e){return o("div",{key:"bundleOption_"+e.option_id},[o("product-bundle-option",{attrs:{option:e,"error-messages":t.errorMessages},on:{"option-changed":t.optionChanged}})],1)})),0)}),[],!1,null,"374385f3",null);e.default=v.exports},968:function(t,e,o){var i=o(1284);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,o(696).default)("778d6544",i,!0,{})}}]);
//# sourceMappingURL=vsf-product-bundle-options.74889a16c5673e48963e.js.map