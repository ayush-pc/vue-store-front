(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{1281:function(t,o,e){"use strict";var i=e(967);e.n(i).a},1282:function(t,o,e){(t.exports=e(695)(!1)).push([t.i,".custom-option>label[data-v-1fdace4c]{font-weight:bold;margin-bottom:10px}.error[data-v-1fdace4c]{color:#eb5757;padding-top:5px;display:block}.relative label[data-v-1fdace4c]{padding-left:35px;margin-bottom:12px;cursor:pointer;font-size:16px;line-height:30px}.relative label[data-v-1fdace4c]:before{content:'';position:absolute;top:3px;left:0;width:22px;height:22px;background-color:#fff;border:1px solid #bdbdbd;cursor:pointer}input[type='text'][data-v-1fdace4c]{-webkit-transition:0.3s all;-o-transition:0.3s all;transition:0.3s all;background:inherit}input[type='text'][data-v-1fdace4c]::-webkit-input-placeholder{color:#bdbdbd}input[type='text'][data-v-1fdace4c]::-moz-placeholder{color:#bdbdbd}input[type='text'][data-v-1fdace4c]:hover,input[type='text'][data-v-1fdace4c]:focus{outline:none;border-color:#000}input[type='radio'][data-v-1fdace4c],input[type='checkbox'][data-v-1fdace4c]{position:absolute;left:0;opacity:0}input[type='radio']:checked+label[data-v-1fdace4c]:before,input[type='checkbox']:checked+label[data-v-1fdace4c]:before{background-color:#bdbdbd;border-color:#bdbdbd;cursor:pointer}input[type='radio']:checked+label[data-v-1fdace4c]:after,input[type='checkbox']:checked+label[data-v-1fdace4c]:after{content:'';position:absolute;top:9px;left:5px;width:11px;height:5px;border:3px solid #fff;border-top:none;border-right:none;background-color:#bdbdbd;-webkit-transform:rotate(-45deg);-ms-transform:rotate(-45deg);transform:rotate(-45deg)}input[type='radio']:hover+label[data-v-1fdace4c]:before,input[type='radio']:focus+label[data-v-1fdace4c]:before,input[type='checkbox']:hover+label[data-v-1fdace4c]:before,input[type='checkbox']:focus+label[data-v-1fdace4c]:before{border-color:#828282}input[type='radio']:disabled+label[data-v-1fdace4c],input[type='checkbox']:disabled+label[data-v-1fdace4c]{cursor:not-allowed}input[type='radio']:disabled+label[data-v-1fdace4c]:hover:before,input[type='radio']:disabled+label[data-v-1fdace4c]:focus:before,input[type='checkbox']:disabled+label[data-v-1fdace4c]:hover:before,input[type='checkbox']:disabled+label[data-v-1fdace4c]:focus:before{border-color:#bdbdbd;cursor:not-allowed}\n",""])},1397:function(t,o,e){"use strict";e.r(o);var i=e(962),n=e(158),r=e(11),a=e(2),c=e(4),p=e(1),s=function(){return(s=Object.assign||function(t){for(var o,e=1,i=arguments.length;e<i;e++)for(var n in o=arguments[e])Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);return t}).apply(this,arguments)},u=function(t){var o="function"==typeof Symbol&&Symbol.iterator,e=o&&t[o],i=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")},d={mixins:[{name:"ProductCustomOptions",props:{product:{type:Object,required:!0}},data:function(){return{inputValues:{},validation:{rules:{},results:{}}}},computed:{selectedOptions:function(){var t=this,o=this.product.custom_options;return o?o.reduce((function(o,e){var n=Object(i.a)(e);return o[n]=Object(i.e)(e.type,e.values,t.inputValues[n]),o}),{}):{}}},created:function(){a.a.dispatch("product/addCustomOptionValidator",{validationRule:"required",validatorFunction:function(t){return{error:Array.isArray(t)?!t.length:!t,message:c.a.t("Field is required.")}}}),this.setupInputFields()},methods:s(s({},Object(n.d)("product",{setCustomOptionValue:r.p})),{setupInputFields:function(){var t,o;try{for(var e=u(this.product.custom_options),n=e.next();!n.done;n=e.next()){var r=n.value,a=Object(i.a)(r);this.$set(this.inputValues,a,Object(i.b)(r)),r.is_require&&this.$set(this.validation.rules,a,"required"),this.optionChanged(r)}}catch(o){t={error:o}}finally{try{n&&!n.done&&(o=e.return)&&o.call(e)}finally{if(t)throw t.error}}},optionChanged:function(t){var o=Object(i.a)(t);this.validateField(t),this.setCustomOptionValue({optionId:t.option_id,optionValue:this.selectedOptions[o]}),this.$store.dispatch("product/setCustomOptions",{product:this.product,customOptions:this.$store.state.product.current_custom_options}),this.$bus.$emit("product-after-customoptions",{product:this.product,option:t,optionValues:this.selectedOptions})},validateField:function(t){var o=Object(i.a)(t),e=this.validation.rules[o];if(this.product.errors.custom_options=null,e){var n=this.$store.state.product.custom_options_validators[e];if("function"==typeof n){var r=n(this.inputValues[o]);this.validation.results[o]=r,r.error?this.product.errors["custom_options_"+o]=c.a.t("Please configure product custom options and fix the validation errors"):this.product.errors["custom_options_"+o]=null}else p.a.error("No validation rule found for "+e,"components-product-custom-options")(),this.validation.results[o]={error:!1,message:""}}else this.validation.results[o]={error:!1,message:""}},isValid:function(){var t=!0;return this.validation.results.map((function(o){o.error&&(t=!1)})),t}})}]},l=(e(1281),e(170)),f=Object(l.a)(d,(function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("form",{staticClass:"custom-options"},t._l(t.product.custom_options,(function(o){return e("div",{key:"customOption_"+o.option_id},[e("div",{staticClass:"custom-option mb15"},[e("h4",[t._v(t._s(o.title))]),t._v(" "),"field"===o.type?e("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValues["customOption_"+o.option_id],expression:"inputValues[('customOption_' + option.option_id)]"}],staticClass:"\n          py10 w-100 border-box brdr-none brdr-bottom-1\n          brdr-cl-primary h4 tk-basic-sans\n        ",attrs:{type:"text",name:"customOption_"+o.option_id,focus:"",placeholder:o.title},domProps:{value:t.inputValues["customOption_"+o.option_id]},on:{change:function(e){return t.optionChanged(o)},input:function(e){e.target.composing||t.$set(t.inputValues,"customOption_"+o.option_id,e.target.value)}}}):t._e(),t._v(" "),"radio"===o.type||"select"===o.type||"drop_down"===o.type?e("div",t._l(o.values,(function(i){return e("div",{key:i.option_type_id,staticClass:"m5 relative"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValues["customOption_"+o.option_id],expression:"inputValues[('customOption_' + option.option_id)]"}],staticClass:"m0 no-outline",attrs:{type:"radio",name:"customOption_"+o.option_id,id:"customOption_"+o.option_id+"_"+i.option_type_id,focus:""},domProps:{value:i.option_type_id,checked:t._q(t.inputValues["customOption_"+o.option_id],i.option_type_id)},on:{change:[function(e){t.$set(t.inputValues,"customOption_"+o.option_id,i.option_type_id)},function(e){return t.optionChanged(o)}]}}),e("label",{staticClass:"pl10 lh20 h4 pointer",attrs:{for:"customOption_"+o.option_id+"_"+i.option_type_id},domProps:{innerHTML:t._s(i.title)}})])})),0):t._e(),t._v(" "),"checkbox"===o.type?e("div",t._l(o.values,(function(i){return e("div",{key:i.option_type_id,staticClass:"m5 relative"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValues["customOption_"+o.option_id],expression:"inputValues[('customOption_' + option.option_id)]"}],staticClass:"m0 no-outline",attrs:{type:"checkbox",name:"customOption_"+o.option_id,id:"customOption_"+i.option_type_id,focus:""},domProps:{value:i.option_type_id,checked:Array.isArray(t.inputValues["customOption_"+o.option_id])?t._i(t.inputValues["customOption_"+o.option_id],i.option_type_id)>-1:t.inputValues["customOption_"+o.option_id]},on:{change:[function(e){var n=t.inputValues["customOption_"+o.option_id],r=e.target,a=!!r.checked;if(Array.isArray(n)){var c=i.option_type_id,p=t._i(n,c);r.checked?p<0&&t.$set(t.inputValues,"customOption_"+o.option_id,n.concat([c])):p>-1&&t.$set(t.inputValues,"customOption_"+o.option_id,n.slice(0,p).concat(n.slice(p+1)))}else t.$set(t.inputValues,"customOption_"+o.option_id,a)},function(e){return t.optionChanged(o)}]}}),e("label",{staticClass:"pl10 lh20 h4 pointer",attrs:{for:"customOption_"+i.option_type_id},domProps:{innerHTML:t._s(i.title)}})])})),0):t._e(),t._v(" "),t.validation.results["customOption_"+o.option_id].error?e("span",{staticClass:"error"},[t._v(t._s(t.validation.results["customOption_"+o.option_id].message))]):t._e()])])})),0)}),[],!1,null,"1fdace4c",null);o.default=f.exports},962:function(t,o,e){"use strict";e.d(o,"b",(function(){return i})),e.d(o,"a",(function(){return n})),e.d(o,"e",(function(){return r})),e.d(o,"d",(function(){return a})),e.d(o,"c",(function(){return c}));var i=function(t){switch(t.type){case"radio":return t.values&&t.values.length?t.values[0].option_type_id:0;case"checkbox":return[];default:return""}},n=function(t){return"customOption_"+t.option_id},r=function(t,o,e){switch(void 0===o&&(o=[]),t){case"field":return e;case"radio":case"select":case"drop_down":var i=o.find((function(t){return t.option_type_id===e})),n=i&&i.option_type_id;return n?String(n):null;case"checkbox":var r=e||[];return o.filter((function(t){return r.includes(t.option_type_id)})).map((function(t){return t.option_type_id})).join(",")||null;default:return null}},a=function(t,o){return t.filter((function(t){return t.option_value})).map((function(t){var e=o.find((function(o){return String(o.option_id)===String(t.option_id)})).values,i=void 0===e?[]:e;return t.option_value.split(",").map((function(t){return i.find((function(o){return String(o.option_type_id)===t}))})).filter(Boolean)})).reduce((function(t,o){return t.concat(o)}),[])},c=function(t,o){var e=o.price,i=o.priceInclTax,n=o.price_incl_tax;return t.reduce((function(t,o){return"fixed"===o.price_type&&0!==o.price&&(t.price+=o.price,t.priceInclTax+=o.price),"percent"===o.price_type&&0!==o.price&&(t.price+=o.price/100*e,t.priceInclTax+=o.price/100*(i||n)),t}),{price:0,priceInclTax:0})}},967:function(t,o,e){var i=e(1282);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,e(696).default)("06e6ad51",i,!0,{})}}]);
//# sourceMappingURL=vsf-product-custom-options.74889a16c5673e48963e.js.map