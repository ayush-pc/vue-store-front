(window.webpackJsonp=window.webpackJsonp||[]).push([[73,20,32],{1172:function(e,t,s){"use strict";var n=s(893);s.n(n).a},1173:function(e,t,s){(e.exports=s(695)(!1)).push([e.i,"\n.reset-password[data-v-66349156] {\n  padding: 20px 30px;\n}\n",""])},1412:function(e,t,s){"use strict";s.r(t);var n=s(7),a=s(4),r=s(723),o=s(705),i=s(708);function c(e,t,s,n,a,r,o){try{var i=e[r](o),c=i.value}catch(e){return void s(e)}i.done?t(c):Promise.resolve(c).then(n,a)}function u(e){return function(){var t=this,s=arguments;return new Promise((function(n,a){var r=e.apply(t,s);function o(e){c(r,n,a,o,i,"next",e)}function i(e){c(r,n,a,o,i,"throw",e)}o(void 0)}))}}var l={name:"ResetPassword",data:function(){return{email:this.$route.query.email,password:"",rPassword:""}},components:{ButtonFull:o.default,BaseInput:r.a},validations:{password:{minLength:Object(i.minLength)(8),required:i.required},rPassword:{required:i.required,sameAsPassword:Object(i.sameAs)("password")}},methods:{resetPassword:function(){var e=this;return u(regeneratorRuntime.mark((function t(){var s,r,o,i,c,u,l,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=Object(n.b)(),s.storeCode,t.next=3,e.$store.dispatch("notification/spawnNotification",{action1:{label:a.a.t("OK")},message:a.a.t("Changing password in progress ..."),type:"success",hasNoTimeout:!0});case 3:return r=t.sent,o=r.id,t.prev=5,t.next=8,e.$store.dispatch("user/createPassword",{email:e.email,newPassword:e.password,resetToken:e.$route.query.token});case 8:if(i=t.sent,e.$store.dispatch("notification/removeNotificationById",o),500!==i.code){t.next=15;break}c=i.result&&i.result.errorMessage&&i.result.errorMessage.includes("No such entity with email")?a.a.t("Provided email does not exist"):i.result.errorMessage,e.$store.dispatch("notification/spawnNotification",{action1:{label:a.a.t("OK")},message:c,type:"error"}),t.next=34;break;case 15:if(200!==i.code){t.next=34;break}if(e.$store.dispatch("notification/spawnNotification",{action1:{label:a.a.t("OK")},message:a.a.t("Sucessfully changed password"),type:"success"}),!e.$store.state.config.users.loginAfterCreatePassword){t.next=33;break}return u=e.$store.dispatch("notification/spawnNotification",{action1:{label:a.a.t("OK")},message:a.a.t("Authorization in progress ..."),type:"success",hasNoTimeout:!0}),l=u.id,t.prev=19,t.next=22,e.$store.dispatch("user/login",{username:e.email,password:e.password});case 22:d=t.sent,e.$store.dispatch("notification/removeNotificationById",l),200!==d.code?e.$store.dispatch("notification/spawnNotification",{action1:{label:a.a.t("OK")},message:a.a.t("Something went wrong, sorry"),type:"error"}):e.$router.push(e.localizedRoute("/")),t.next=31;break;case 27:t.prev=27,t.t0=t.catch(19),e.$store.dispatch("notification/removeNotificationById",l),e.$store.dispatch("notification/spawnNotification",{action1:{label:a.a.t("OK")},message:a.a.t("Something went wrong, sorry"),type:"error"});case 31:t.next=34;break;case 33:e.$router.push(e.localizedRoute("/"));case 34:t.next=42;break;case 36:return t.prev=36,t.t1=t.catch(5),t.next=40,e.$store.dispatch("notification/removeNotificationById",o);case 40:return t.next=42,e.$store.dispatch("notification/spawnNotification",{action1:{label:a.a.t("OK")},message:a.a.t("Something went wrong, sorry"),type:"error"});case 42:case"end":return t.stop()}}),t,null,[[5,36],[19,27]])})))()}},asyncData:function(e){return u(regeneratorRuntime.mark((function t(){var s,a,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=e.context,a=e.route,r=Object(n.b)(),r.storeCode,s&&(a.query.token&&a.query.email||s.server.response.redirect(Object(n.e)("/")));case 3:case"end":return t.stop()}}),t)})))()}},d=(s(1172),s(170)),p=Object(d.a)(l,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"reset-password"},[s("h2",{staticClass:"reset-password__heading"},[e._v("\n    "+e._s(e.$t("Reset password"))+"\n  ")]),e._v(" "),s("form",{staticClass:"reset-password__form"},[s("div",{staticClass:"reset-password__row"},[s("base-input",{staticClass:"mb10",attrs:{type:"password",name:"password",placeholder:e.$t("Password *"),validations:[{condition:!e.$v.password.required&&e.$v.password.$error,text:e.$t("Field is required.")}]},on:{blur:function(t){return e.$v.password.$touch()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),e._v(" "),s("div",{staticClass:"reset-password__row"},[s("base-input",{staticClass:"mb10",attrs:{type:"password",name:"password-confirm",placeholder:e.$t("Repeat password *"),validations:[{condition:!e.$v.rPassword.required&&e.$v.rPassword.$error,text:e.$t("Field is required.")},{condition:!e.$v.rPassword.sameAsPassword&&e.$v.rPassword.$error,text:e.$t("Passwords must be identical.")}]},on:{blur:function(t){return e.$v.password.$touch()},keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;!e.$v.$invalid&&e.resetPassword()}},model:{value:e.rPassword,callback:function(t){e.rPassword=t},expression:"rPassword"}})],1),e._v(" "),s("div",{staticClass:"reset-password__row"},[s("ButtonFull",{attrs:{theme:"dark",disabled:e.$v.$invalid},nativeOn:{click:function(t){return e.resetPassword(t)}}},[e._v("\n        "+e._s(e.$t("Reset password"))+"\n      ")])],1)])])}),[],!1,null,"66349156",null);t.default=p.exports},697:function(e,t,s){var n=s(714);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,s(696).default)("45e76e28",n,!0,{})},698:function(e,t,s){var n=s(716);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,s(696).default)("6135e5be",n,!0,{})},699:function(e,t,s){"use strict";s.r(t);var n=s(9);t.default=n.a.directive("focus-clean",{inserted:function(e,t){var s=!1,n=!(!t.value||!t.value.class)&&t.value.class,a=t.value&&t.value.delay?t.value.delay:1e3;e.addEventListener("mousedown",(function(){s=!0})),e.addEventListener("mouseup",(function(e){s=!1,n&&setTimeout((function(){e.target.blur(),e.target.classList.remove(n)}),a)})),e.addEventListener("focus",(function(e){s&&(n?e.target.classList.add(n):e.target.blur())}))}})},702:function(e,t,s){var n=s(736);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,s(696).default)("be596c52",n,!0,{})},705:function(e,t,s){"use strict";s.r(t);var n={name:"ButtonFull",directives:{focusClean:s(699).default},props:{type:{type:String,required:!1,default:"button"},link:{type:Object,required:!1,default:null},disabled:{type:Boolean,required:!1,default:!1}},computed:{compontentType:function(){return this.link?"router-link":"button"},redirectionLink:function(){return this.link?this.localizedRoute(this.link):null}}},a=(s(713),s(715),s(170)),r=Object(a.a)(n,(function(){var e=this,t=e.$createElement;return(e._self._c||t)(e.compontentType,{tag:"component",staticClass:"no-outline button-full block brdr-none w-100 px10 py20 bg-cl-mine-shaft :bg-cl-th-secondary ripple weight-400 h4 cl-white sans-serif fs-medium",class:{"no-underline pointer align-center border-box":e.link,disabled:e.disabled,"button-disabled":e.disabled},attrs:{type:!e.link&&e.type,to:e.redirectionLink,"data-testid":"subscribeSubmit",disabled:e.disabled}},[e._t("default",[e._v("\n    Button\n  ")])],2)}),[],!1,null,"ce513252",null);t.default=r.exports},713:function(e,t,s){"use strict";var n=s(697);s.n(n).a},714:function(e,t,s){(e.exports=s(695)(!1)).push([e.i,".disabled[data-v-ce513252]{background-color:gray}\n",""])},715:function(e,t,s){"use strict";var n=s(698);s.n(n).a},716:function(e,t,s){(e.exports=s(695)(!1)).push([e.i,".button-full{min-width:250px}\n",""])},723:function(e,t,s){"use strict";var n={name:"BaseInput",components:{ValidationMessages:function(){return s.e(90).then(s.bind(null,722))}},data:function(){return{passType:"password",iconActive:!1,icon:"visibility_off"}},props:{type:{type:String,required:!0},value:{type:[String,Number],default:""},name:{type:String,required:!1,default:""},placeholder:{type:String,required:!1,default:""},autocomplete:{type:String,required:!1,default:""},focus:{type:Boolean,required:!1,default:!1},autofocus:{type:Boolean,required:!1,default:!1},validations:{type:Array,default:function(){return[]}},maxlength:{type:Number,required:!1,default:100}},methods:{togglePassType:function(){"password"===this.passType?(this.passType="text",this.icon="visibility"):(this.passType="password",this.icon="visibility_off")},setFocus:function(e){this.name===e&&this.$refs[this.name].focus()}},created:function(){"password"===this.type&&(this.iconActive=!0)},mounted:function(){this.focus&&this.$refs[this.name].focus()}},a=(s(735),s(170)),r=Object(a.a)(n,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"relative base-input sans-serif"},[s("div",{staticClass:"relative"},[s("input",{ref:e.name,staticClass:"\n       py10 w-100 border-box brdr-none brdr-bottom-1\n       brdr-cl-primary h4 tk-basic-sans\n     ",class:{pr30:"password"===e.type,empty:""===e.value},attrs:{type:"password"===e.type?e.passType:e.type,name:e.name,autocomplete:e.autocomplete,autofocus:e.autofocus},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)},blur:function(t){return e.$emit("blur")},keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.$emit("keyup.enter",t.target.value)},function(t){return e.$emit("keyup",t)}]}}),e._v(" "),s("label",[e._v(e._s(e.placeholder))])]),e._v(" "),e.iconActive?s("button",{staticClass:"\n      icon material-icons absolute brdr-none no-outline\n      p0 bg-cl-transparent cl-brdr-secondary pointer\n    ",attrs:{type:"button","aria-label":e.$t("Toggle password visibility"),title:e.$t("Toggle password visibility")},on:{click:function(t){return e.togglePassType()}}},[e._v("\n    "+e._s(e.icon)+"\n  ")]):e._e(),e._v(" "),e.validations?s("ValidationMessages",{attrs:{validations:e.validations}}):e._e()],1)}),[],!1,null,"f3ced642",null);t.a=r.exports},735:function(e,t,s){"use strict";var n=s(702);s.n(n).a},736:function(e,t,s){(e.exports=s(695)(!1)).push([e.i,".base-input[data-v-f3ced642]{min-height:4.5rem}input[data-v-f3ced642]{background:inherit}input[data-v-f3ced642]:hover,input[data-v-f3ced642]:focus{outline:none;border-color:#4dba87}input[data-v-f3ced642]:disabled,input:disabled+label[data-v-f3ced642]{opacity:0.5;cursor:not-allowed;pointer-events:none}label[data-v-f3ced642]{color:#999;position:absolute;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;left:0;top:10px;-o-transition:0.2s ease all;transition:0.2s ease all;-moz-transition:0.2s ease all;-webkit-transition:0.2s ease all}input:focus ~ label[data-v-f3ced642],input:not(.empty) ~ label[data-v-f3ced642]{top:-10px;font-size:14px;color:#4dba87}.icon[data-v-f3ced642]{right:6px;top:10px}.icon[data-v-f3ced642]:hover,.icon[data-v-f3ced642]:focus{color:#8e8e8e}\n",""])},893:function(e,t,s){var n=s(1173);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,s(696).default)("5de9e66b",n,!0,{})}}]);
//# sourceMappingURL=vsf-reset-password.74889a16c5673e48963e.js.map